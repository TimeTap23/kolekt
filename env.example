# Kolekt Environment Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# APP CONFIGURATION
# =============================================================================
APP_NAME=Kolekt
APP_VERSION=2.0.0
DEBUG=false
HOST=0.0.0.0
PORT=8000
SECRET_KEY=your-super-secret-key-here-change-this-in-production
JWT_SECRET=your-jwt-signing-key-here
TOKEN_ENCRYPTION_KEY=your-token-encryption-key-here

# Admin Configuration
ADMIN_EMAIL=info@marteklabs.com
ADMIN_PASSWORD=your-secure-admin-password-here

# =============================================================================
# DATABASE - SUPABASE
# =============================================================================
# Get these from your Supabase project dashboard
SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_KEY=your-service-role-key-here
SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_STORAGE_BUCKET=kolekt

# PostgreSQL connection string (optional, for direct database access)
DATABASE_URL=postgresql://postgres:[YOUR-PASSWORD]@db.[YOUR-PROJECT-REF].supabase.co:5432/postgres

# =============================================================================
# THREADS API CONFIGURATION
# =============================================================================
# Get these from Meta's Developer Console (https://developers.facebook.com/)
# Create a new app and enable the Instagram Basic Display API
THREADS_API_KEY=your-threads-api-key
THREADS_API_SECRET=your-threads-api-secret
THREADS_ACCESS_TOKEN=your-threads-access-token
THREADS_ACCESS_TOKEN_SECRET=your-threads-access-token-secret

# Note: Threads API uses the Instagram Graph API v18.0
# You'll need to:
# 1. Create a Meta Developer account
# 2. Create a new app in the Developer Console
# 3. Enable Instagram Basic Display API
# 4. Generate access tokens with appropriate permissions
# 5. Configure webhook endpoints for real-time updates

# =============================================================================
# COMMERCIAL FEATURES - STRIPE
# =============================================================================
# Get these from your Stripe dashboard
STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key
STRIPE_PUBLISHABLE_KEY=pk_test_your-stripe-publishable-key
STRIPE_WEBHOOK_SECRET=whsec_your-stripe-webhook-secret

# Stripe Price IDs for subscription plans
STRIPE_PRICE_STARTER_MONTHLY=price_your_starter_monthly_price_id
STRIPE_PRICE_PRO_MONTHLY=price_your_pro_monthly_price_id
STRIPE_PRICE_BUSINESS_MONTHLY=price_your_business_monthly_price_id

# Stripe Price IDs for credit packs (one-time purchases)
STRIPE_PRICE_CREDITS_100=price_your_100_credits_price_id
STRIPE_PRICE_CREDITS_300=price_your_300_credits_price_id
STRIPE_PRICE_CREDITS_750=price_your_750_credits_price_id

# Billing portal return URL
STRIPE_BILLING_PORTAL_RETURN_URL=https://www.kolekt.io/dashboard

# OAuth Configuration
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
GOOGLE_REDIRECT_URI=https://www.kolekt.io/auth/google/callback

META_CLIENT_ID=your_meta_client_id
META_CLIENT_SECRET=your_meta_client_secret
META_REDIRECT_URI=https://www.kolekt.io/auth/meta/callback

TWITTER_CLIENT_ID=your_twitter_client_id
TWITTER_CLIENT_SECRET=your_twitter_client_secret
TWITTER_REDIRECT_URI=https://www.kolekt.io/auth/twitter/callback

LINKEDIN_CLIENT_ID=your_linkedin_client_id
LINKEDIN_CLIENT_SECRET=your_linkedin_client_secret
LINKEDIN_REDIRECT_URI=https://www.kolekt.io/auth/linkedin/callback

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================
# For sending transactional emails (welcome, upgrade reminders, etc.)
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
FROM_EMAIL=noreply@kolekt.com

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
# For caching, rate limiting, and session storage
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_FREE=10
RATE_LIMIT_PRO=100
RATE_LIMIT_BUSINESS=500
RATE_LIMIT_ENTERPRISE=2000

# =============================================================================
# USAGE LIMITS
# =============================================================================
# Threadstorms per month per plan
USAGE_LIMIT_FREE=10
USAGE_LIMIT_PRO=100
USAGE_LIMIT_BUSINESS=1000
USAGE_LIMIT_ENTERPRISE=10000

# =============================================================================
# API CONFIGURATION
# =============================================================================
# API calls per month per plan
API_QUOTA_FREE=10
API_QUOTA_PRO=1000
API_QUOTA_BUSINESS=10000
API_QUOTA_ENTERPRISE=100000

# =============================================================================
# FILE UPLOAD CONFIGURATION
# =============================================================================
ALLOWED_EXTENSIONS=["jpg", "jpeg", "png", "gif", "webp"]
MAX_FILE_SIZE=10485760

# =============================================================================
# AUTHENTICATION
# =============================================================================
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
ALLOWED_ORIGINS=["http://localhost:3000", "http://127.0.0.1:3000", "http://localhost:8000", "http://127.0.0.1:8000"]

# =============================================================================
# LOGGING
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# =============================================================================
# COMMERCIAL FEATURES
# =============================================================================
COMMERCIAL_MODE=false
TRIAL_DAYS=14
REFERRAL_REWARD_DAYS=30

# =============================================================================
# ANALYTICS
# =============================================================================
ANALYTICS_ENABLED=true
ANALYTICS_RETENTION_DAYS=365

# =============================================================================
# SECURITY
# =============================================================================
PASSWORD_MIN_LENGTH=8
SESSION_TIMEOUT_MINUTES=60

# =============================================================================
# PERFORMANCE
# =============================================================================
CACHE_TTL_SECONDS=3600
TEMPLATE_CACHE_TTL=1800

# =============================================================================
# MONITORING
# =============================================================================
HEALTH_CHECK_ENABLED=true
METRICS_ENABLED=true

# =============================================================================
# OAUTH CONFIGURATION
# =============================================================================
# Google OAuth Configuration
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URI=http://localhost:8000/api/v1/auth/google/callback

# Meta OAuth Configuration (already exists)
META_APP_ID=your-meta-app-id
META_APP_SECRET=your-meta-app-secret
META_REDIRECT_URI=http://localhost:8000/api/v1/auth/meta/callback

# =============================================================================
# META PLATFORM CONFIGURATION
# =============================================================================
# Get these from your Meta Developer Console
META_APP_ID=your-meta-app-id
META_APP_SECRET=your-meta-app-secret
META_REDIRECT_URI=https://your-domain.com/oauth/callback
META_WEBHOOK_VERIFY_TOKEN=your-webhook-verify-token

# Threads API Configuration (separate from Meta)
THREADS_APP_ID=your-threads-app-id
THREADS_APP_SECRET=your-threads-app-secret

# Meta API Configuration
META_API_VERSION=v18.0
META_GRAPH_API_URL=https://graph.facebook.com
META_OAUTH_URL=https://www.facebook.com

# Meta Rate Limits (per profile per day)
META_POSTS_PER_DAY=250
META_REPLIES_PER_DAY=1000
META_REQUESTS_PER_HOUR=200
META_BULK_OPERATIONS_PER_DAY=50

# Meta Compliance Settings
META_APP_REVIEW_MODE=true
META_BUSINESS_VERIFICATION_REQUIRED=true
META_DATA_USE_CHECKUP_REQUIRED=true

# =============================================================================
# PRIVACY & COMPLIANCE
# =============================================================================
PRIVACY_POLICY_URL=https://your-domain.com/privacy
DATA_DELETION_URL=https://your-domain.com/data-deletion
GDPR_COMPLIANT=true
CCPA_COMPLIANT=true

# Business Information
BUSINESS_NAME=Martek Labs LLC
BUSINESS_EIN=your-business-ein
BUSINESS_ADDRESS=your-business-address
BUSINESS_VERIFICATION_STATUS=pending

# Annual Compliance
DATA_USE_CHECKUP_LAST_COMPLETED=2024-01-01
DATA_USE_CHECKUP_NEXT_DUE=2025-01-01
PLATFORM_TERMS_ACCEPTED=true

# =============================================================================
# PRODUCTION SAFETY
# =============================================================================
PRODUCTION_MODE=false
ENABLE_BULK_OPERATIONS=false
MAX_BULK_POSTS=10
ENABLE_SCHEDULING=true
MAX_SCHEDULE_DAYS=30

# Security & Monitoring
ENABLE_AUDIT_LOGS=true
ENABLE_RATE_LIMIT_LOGS=true
ENABLE_ACCESS_LOGS=true
ENABLE_DELETION_LOGS=true

# Token Management
TOKEN_ENCRYPTION_KEY=your-token-encryption-key
TOKEN_REFRESH_THRESHOLD_DAYS=7
MAX_TOKEN_REFRESH_ATTEMPTS=3

# Job Queue Configuration
JOB_QUEUE_ENABLED=true
JOB_QUEUE_MAX_RETRIES=3
JOB_QUEUE_BASE_DELAY=1.0
JOB_QUEUE_MAX_DELAY=300

# Backoff Strategies
BACKOFF_EXPONENTIAL_MAX=300
BACKOFF_LINEAR_MAX=60
BACKOFF_JITTER_MAX=120

# Data Retention
DATA_RETENTION_DAYS=730
DELETION_LOG_RETENTION_DAYS=30
AUDIT_LOG_RETENTION_DAYS=365

# Email Configuration for Compliance
COMPLIANCE_EMAIL_ENABLED=true
COMPLIANCE_EMAIL_FROM=privacy@your-domain.com

# Meta Platform Terms Compliance
PLATFORM_TERMS_VERSION=2024-01-01
ANTI_SPAM_ENABLED=true
CONTENT_MODERATION_ENABLED=true
USER_GUIDANCE_ENABLED=true

# App Review Requirements
APP_REVIEW_SCREENCAST_URL=https://your-domain.com/screencast
APP_REVIEW_TEST_CREDENTIALS=test-credentials-url
APP_REVIEW_DATA_USAGE_DESCRIPTION=Kolekt formats and publishes content to Threads. We collect content you choose to publish, basic profile information, and usage analytics to provide our service.

# Webhook Configuration
WEBHOOK_ENABLED=true
WEBHOOK_VERIFY_TOKEN=your-webhook-verify-token
WEBHOOK_SECRET=your-webhook-secret

# Monitoring & Alerting
MONITORING_ENABLED=true
ALERT_EMAIL=alerts@your-domain.com
RATE_LIMIT_ALERT_THRESHOLD=0.8
ERROR_ALERT_THRESHOLD=10

# Compliance Reporting
COMPLIANCE_REPORTING_ENABLED=true
MONTHLY_COMPLIANCE_REPORT=true
QUARTERLY_DATA_USE_REVIEW=true

# =============================================================================
# AWS KMS CONFIGURATION
# =============================================================================
AWS_KMS_KEY_ID=your-kms-key-id
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key

# =============================================================================
# SECURITY HARDENING
# =============================================================================
ENABLE_KMS_ENCRYPTION=true
ENABLE_TOKEN_ENCRYPTION=true
ENABLE_WEBHOOK_SIGNATURE_VERIFICATION=true
ENABLE_IDEMPOTENCY_KEYS=true

# RBAC Configuration
ENABLE_RBAC=true
ADMIN_ROLES=admin,super_admin
USER_ROLES=user,pro,business

# =============================================================================
# OBSERVABILITY CONFIGURATION
# =============================================================================
OBSERVABILITY_ENABLED=true
METRICS_ENABLED=true
ALERTING_ENABLED=true
CENTRALIZED_LOGGING_ENABLED=true

# Metrics Configuration
METRICS_RETENTION_DAYS=7
METRICS_FLUSH_INTERVAL=60
METRICS_BUFFER_SIZE=100

# Alerting Configuration
ALERT_RETENTION_DAYS=90
ALERT_CHECK_INTERVAL=60
ALERT_NOTIFICATION_CHANNELS=email,slack

# =============================================================================
# PIPELINE CONFIGURATION
# =============================================================================
PIPELINE_ENABLED=true
DEDUPLICATION_ENABLED=true
DEDUPLICATION_WINDOW_HOURS=24
IDEMPOTENCY_KEY_EXPIRY_HOURS=24

# =============================================================================
# BRAND PROTECTION
# =============================================================================
BRAND_PROTECTION_ENABLED=true
TRADEMARK_CHECK_ENABLED=true
BRAND_COMPLIANCE_MIDDLEWARE_ENABLED=true
